<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Search</title>
    <style>
        /* 设置整体页面背景色和文字颜色 */
        body {
            background-color: #f0f0f0;
            color: #333;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* 设定标题样式 */
        h1 {
            text-align: center;
            color: #0078d4;
            margin: 20px 0;
        }
    </style>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style_header.css') }}">
</head>

<body>
    <header class="header">
        <a class="logo" href="{{ url_for('index_ctrl.index') }}">Logo</a>

        <!-- 用户容器包括用户图标和用户名 -->
        <div class="user-container">
            <div class="user-icon">
                {{ username[0] }}
            </div>
            <div class="username">
                {{ username }}
            </div>

            <!-- 用户浮窗 -->
            <div class="user-popup">
                <a href="{{ url_for('relation_ctrl.favorites', username=username) }}">我的收藏</a>
                <a href="{{ url_for('relation_ctrl.history', username=username) }}">历史记录</a>
                <a href="{{ url_for('relation_ctrl.judge', username=username) }}">用户反馈</a>
                <a href="{{ url_for('auth_ctrl.logout', username=username) }}">退出登录</a>
            </div>
        </div>
    </header>
    <form action="{{ url_for('result_ctrl.search_results') }}" method="get">
        <input type="text" name="q" placeholder="Search...">
        <input type="hidden" name="pn" value="1">
        <input type="hidden" name="username" value={{username}}>
        <select name="search_type">
            <option value="web">Web</option>
            <option value="literature">文献</option>
        </select>
        <input type="submit" value="Search">
    </form>

    <dl>
        {% for key,value in dic.items() %}
        <a href='/browse?url={{value["url"]}}&search_type={{search_type}}&username={{username}}&title={{value["title"]}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>{{value["title"]}}</a>
&nbsp
        <a href='/good?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>赞</a>
        &nbsp
        <a href='/bad?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>踩</a>
        &nbsp
        <a
            href='/favorite?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>收藏</a>
        <dd>{{value["des"]}}</dd>
        <dd>{{value["origin"],value["time"]}}</dd>
        <br>
        {% endfor %}
    </dl>

    <ul>
        <h2>相关推荐</h2>
        {% for key,value in relate.items() %}
        <a href="/rela_results?str={{value}}">{{value}}</a>
        {% endfor %}
    </ul>

    <h2>点赞数前三的结果</h2>
    <dl>
        {% for key,value in dlike.items() %}
        <a href='/browse?url={{value["url"]}}&search_type={{search_type}}&username={{username}}&title={{value["title"]}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>{{value["title"]}}</a>
&nbsp
        <a href='/good?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>赞</a>
        &nbsp
        <a href='/bad?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>踩</a>
        &nbsp
        <a
            href='/favorite?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>收藏</a>
        <dd>{{value["des"]}}</dd>
        <dd>{{value["origin"],value["time"]}}</dd>
        <br>
        {% endfor %}
    </dl>

    <h2>收藏数前三的结果</h2>
    <dl>
        {% for key,value in dfav.items() %}
        <a href='/browse?url={{value["url"]}}&search_type={{search_type}}&username={{username}}&title={{value["title"]}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>{{value["title"]}}</a>
&nbsp
        <a href='/good?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>赞</a>
        &nbsp
        <a href='/bad?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>踩</a>
        &nbsp
        <a
            href='/favorite?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>收藏</a>
        <dd>{{value["des"]}}</dd>
        <dd>{{value["origin"],value["time"]}}</dd>
        <br>
        {% endfor %}
    </dl>

    <h2>浏览数前三的结果</h2>
    <dl>
        {% for key,value in dbr.items() %}
        <a href='/browse?url={{value["url"]}}&search_type={{search_type}}&username={{username}}&title={{value["title"]}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>{{value["title"]}}</a>
&nbsp
        <a href='/good?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>赞</a>
        &nbsp
        <a href='/bad?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>踩</a>
        &nbsp
        <a
            href='/favorite?url={{value["url"]}}&title={{value["title"]}}&query={{query}}&search_type={{search_type}}&pn={{pn}}&username={{username}}&origin={{value["origin"]}}&snippet={{value["snippet"]}}&time_origin={{value["time"]}}'>收藏</a>
        <dd>{{value["des"]}}</dd>
        <dd>{{value["origin"],value["time"]}}</dd>
        <br>
        {% endfor %}
    </dl>

    <a href="{{ url_for('result_ctrl.search_results',q=query,search_type=search_type,pn=(pn+1)) }}">下一页</a>
    <a href="{{ url_for('result_ctrl.search_results',q=query,search_type=search_type,pn=(pn-1)) }}">上一页</a>
</body>

</html>
