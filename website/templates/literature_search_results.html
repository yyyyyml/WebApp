<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <style>
        /* 设置整体页面背景色和文字颜色 */
        body {
            background-color: #f0f0f0;
            color: #333;
            font-family: Arial, sans-serif;
            margin: 0;
             padding: 0;
        }

        /* 设定标题样式 */
        h1 {
            text-align: center;
            color: #0078d4;
            margin: 20px 0;
        }


        .result-item {
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin: 10px;
            padding: 10px;
        }
        
        .result-meta {
            margin: 10px 0;
        }
        
        .meta-item {
            margin: 10px;
        }
        
        .meta-details {
            margin-left: 10px;
            color: #777;
        }
        
        .result-snippet {
            margin: 10px 0;
        }
        
        .pdf-link {
            margin: 10px;
        }
        
        .summary-link {
            margin: 10px;
        }

        .search-form {
            display: flex;
            align-items: center;
        }
        
        .search-container {
            display: flex;
            align-items: center;
            background-color: #fff;
            border: 1px solid #ccc;
            border-radius: 4px;
            padding: 4px;
            margin-right: 10px;
        }
        
        .search-input {
            border: none;
            outline: none;
            width: 100%;
            padding: 8px;
            font-size: 16px;
        }
        
        .search-type {
            border: none;
            outline: none;
            background: transparent;
            font-size: 16px;
            margin-left: 5px;
        }
        
        .search-button {
            background-color: #0078d4;
            color: #fff;
            border: none;
            border-radius: 4px;
            padding: 10px 16px;
            cursor: pointer;
            font-size: 16px;
        }
        
        .search-button:hover {
            background-color: #0056b3;
        }
        
        

    </style>
    <title>Search</title>
</head>

<body>
    <h1>文献搜索结果</h1>
    <a href="{{ url_for('index_ctrl.index') }}">回到首页</a>
    <a href="{{ url_for('auth_ctrl.logout', username=username) }}">退出登录</a>
    <form class="search-form" action="{{ url_for('result_ctrl.search_results') }}" method="get">
        <div class="search-container">
            <input class="search-input" type="text" name="q" placeholder="Search...">
            <input type="hidden" name="pn" value="1">
            <select class="search-type" name="search_type">
                
                <option value="web">Web</option>
                <option value="literature">文献</option>
            </select>
        </div>
        <button class="search-button" type="submit">
            <i class="fa fa-search"></i> Search
        </button>
    </form>

    <dl>
        {% for key, value in dic.items() %}
        <div class="result-item">
            <h3>
                <a href='/browse?url={{ value["link"] }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>
                    {{ value["title"] }}
                </a>
            </h3>
            <div class="result-meta">
                <span class="meta-item">
                    <a href='/good?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>赞</a>
                &nbsp
                <a href='/bad?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>踩</a>
                &nbsp
                <a href='/favorite?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>收藏</a>
                <span class="meta-details">{{ value["authors"] }}, {{ value["citations"] }}</span>
            </div>
            <p class="result-snippet">{{ value["snippet"] }}</p>
            {% if value["pdf_link"] %}
            <a href='{{ value["pdf_link"] }}' class="pdf-link">.pdf</a>
            <a href='/summary?url={{ value["pdf_link"] }}' class="summary-link">总结</a>
            {% endif %}
        </div>
        {% endfor %}
    </dl>

    <h2>点赞数前三的结果</h2>
    <dl>
        {% for key, value in dlike.items() %}
        <div class="result-item">
            <h3>
                <a href='/browse?url={{ value["link"] }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>
                    {{ value["title"] }}
                </a>
            </h3>
            <div class="result-meta">
                <span class="meta-item">
                    <a href='/good?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>赞</a>
                    &nbsp
                    <a href='/bad?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>踩</a>
                    &nbsp
                    <a href='/favorite?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>收藏</a>
                    <span class="meta-details">{{ value["authors"] }}, {{ value["citations"] }}</span>
                </div>
                <p class="result-snippet">{{ value["snippet"] }}</p>
                {% if value["pdf_link"] %}
                <a href='{{ value["pdf_link"] }}' class="pdf-link">.pdf</a>
                <a href='/summary?url={{ value["pdf_link"] }}' class="summary-link">总结</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </dl>
    
    <h2>收藏数前三的结果</h2>
    <dl>
        {% for key, value in dfav.items() %}
        <div class="result-item">
            <h3>
                <a href='/browse?url={{ value["link"] }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>
                    {{ value["title"] }}
                </a>
            </h3>
            <div class="result-meta">
                <span class="meta-item">
                    <a href='/good?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>赞</a>
                    &nbsp
                    <a href='/bad?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author={{ value["authors"] }}&cites={{ value["citations"] }}'>踩</a>
                    &nbsp
                    <a href='/favorite?url={{ value["link"] }}&title={{ value["title"] }}&query={{ query }}&search_type={{ search_type }}&pn={{ pn }}&username={{ username }}&snippet={{ value["snippet"] }}&author {{ value["authors"] }}&cites {{ value["citations"] }}'>收藏</a>
                    <span class="meta-details">{{ value["authors"] }}, {{ value["citations"] }}</span>
                </div>
                <p class="result-snippet">{{ value["snippet"] }}</p>
                {% if value["pdf_link"] %}
                <a href='{{ value["pdf_link"] }}' class="pdf-link">.pdf</a>
                <a href='/summary?url={{ value["pdf_link"] }}' class="summary-link">总结</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </dl>
    
    <h2>浏览数前三的结果</h2>
    <dl>
        {% for key, value in dbr.items() %}
        <div class="result-item">
            <h3>
                <a href='/browse?url={{ value["link"] }}&search_type={{ search_type }}&pdf_link={{ value["pdf_link"] }}&username={{ username }}&snippet {{ value["snippet"] }}&author {{ value["authors"] }}&cites {{ value["citations"] }}'>
                    {{ value["title"] }}
                </a>
            </h3>
            <div class="result-meta">
                <span class="meta-item">
                    <a href='/good?url {{ value["link"] }}&title {{ value["title"] }}&query {{ query }}&search_type {{ search_type }}&pdf_link {{ value["pdf_link"] }}&pn {{ pn }}&username {{ username }}&snippet {{ value["snippet"] }}&author {{ value["authors"] }}&cites {{ value["citations"] }}'>赞</a>
                    &nbsp
                    <a href='/bad?url {{ value["link"] }}&title {{ value["title"] }}&query {{ query }}&search_type {{ search_type }}&pdf_link {{ value["pdf_link"] }}&pn {{ pn }}&username {{ username }}&snippet {{ value["snippet"] }}&author {{ value["authors"] }}&cites {{ value["citations"] }}'>踩</a>
                    &nbsp
                    <a href='/favorite?url {{ value["link"] }}&title {{ value["title"] }}&query {{ query }}&search_type {{ search_type }}&pn {{ pn }}&username {{ username }}&snippet {{ value["snippet"] }}&author {{ value["authors"] }}&cites {{ value["citations"] }}'>收藏</a>
                    <span class="meta-details">{{ value["authors"] }}, {{ value["citations"] }}</span>
                </div>
                <p class="result-snippet">{{ value["snippet"] }}</p>
                {% if value["pdf_link"] %}
                <a href='{{ value["pdf_link"] }}' class="pdf-link">.pdf</a>
                <a href='/summary?url={{ value["pdf_link"] }}' class="summary-link">总结</a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </dl>
    
    <a href="{{ url_for('result_ctrl.search_results',q=query,search_type=search_type,pn=(pn+1)) }}">下一页</a>
    <a href="{{ url_for('result_ctrl.search_results',q=query,search_type=search_type,pn=(pn-1)) }}">上一页</a>
</body>

</html>